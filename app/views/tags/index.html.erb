<% content_for :modal_size do %>max-w-2xl max-h-[85vh] overflow-y-auto<% end %>
<% content_for :modal_header do %>
  <h2 class="text-lg font-bold text-zinc-100">Tags</h2>
<% end %>

<% content_for :modal_content do %>
  <div class="space-y-4">
    <div data-controller="colorpicker">
      <%= form_with(
        model: @tag,
        id: 'tags-form',
        data: { controller: "reset-form", action: "turbo:submit-end->reset-form#reset" },
        class: "flex flex-wrap items-end gap-3"
      ) do |form| %>
        <% if form.object.errors.any? %>
          <div class="flex items-start gap-3 rounded-xl border border-red-500/30 bg-red-500/10 text-red-200 px-4 py-3 text-sm" id="alert">
            <svg class="w-4 h-4 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M12 6.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3z"/></svg>
            <span><%= form.object.errors.full_messages.first %></span>
          </div>
        <% end %>
        <div class="w-2/3 flex-1 min-w-[120px] space-y-1.5">
          <%= form.label :name, class: "block text-[10px] font-bold uppercase tracking-widest text-zinc-600 ml-1" %>
          <%= form.text_field :name, 
            placeholder: "e.g. Work",
            class: "w-full bg-zinc-800/80 border border-zinc-700 rounded-xl px-4 py-2.5 text-sm text-white placeholder:text-zinc-700 focus:outline-none focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500/40 transition-all" %>
        </div>
        <div class="w-1/3 space-y-1.5 min-w-[7rem]">
          <%= form.label :color, class: "block text-[10px] font-bold uppercase tracking-widest text-zinc-600 ml-1" %>
          <div class="rounded-xl overflow-hidden">
            <input
              type="text"
              id="colorpicker"
              name="tag[color]"
              value=""
              class="w-full bg-zinc-800/80 border border-zinc-700 rounded-xl px-4 py-2.5 text-sm text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500/40 transition-all"
              readonly
            />
          </div>
        </div>
        <%= form.submit "Save",
          class: "cursor-pointer px-5 py-2 bg-orange-600 hover:bg-orange-500 text-zinc-950 text-sm font-bold rounded-xl transition-all active:scale-95 cursor-pointer shadow-lg shadow-white/5" %>
      <% end %>
    </div>

    <div class="space-y-1">
      <p class="text-[10px] font-bold uppercase tracking-widest text-zinc-500 ml-1 mb-2">Your tags</p>
      <div id="tags-container" class="flex flex-wrap gap-2 overflow-y-auto pr-1 -mr-1 max-h-96">
        <% if @tags.any? %>
            <%= render @tags %>
        <% else %>
          <p id="tags-empty" class="w-full text-sm text-zinc-500 py-4 text-center rounded-xl bg-zinc-800/20 border-2 border-zinc-800/50 border-dashed">
            No tags yet. Add one above.
          </p>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
